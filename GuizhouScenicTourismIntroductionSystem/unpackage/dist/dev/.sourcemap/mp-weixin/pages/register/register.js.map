{"version":3,"file":"register.js","sources":["pages/register/register.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"register-container\">\r\n\t\t<view class=\"register-form\">\r\n\t\t\t<view class=\"form-title\">注册账号</view>\r\n\t\t\t<view class=\"input-group\">\r\n\t\t\t\t<input type=\"text\" v-model=\"phone\" placeholder=\"请输入手机号\" maxlength=\"11\" />\r\n\t\t\t\t<view class=\"verify-code\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"verifyCode\" placeholder=\"请输入验证码\" maxlength=\"6\" />\r\n\t\t\t\t\t<button :disabled=\"counting\" @click=\"getVerifyCode\">\r\n\t\t\t\t\t\t{{counting ? `${countdown}s后重试` : '获取验证码'}}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<input type=\"password\" v-model=\"password\" placeholder=\"请设置密码\" />\r\n\t\t\t\t<input type=\"password\" v-model=\"confirmPassword\" placeholder=\"请确认密码\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btn-group\">\r\n\t\t\t\t<button type=\"primary\" @click=\"handleRegister\">注册</button>\r\n\t\t\t\t<button type=\"default\" @click=\"goToLogin\">返回登录</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * 注册页面\r\n * @description 用户注册界面，支持手机号验证码注册\r\n */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tphone: '',\r\n\t\t\tverifyCode: '',\r\n\t\t\tpassword: '',\r\n\t\t\tconfirmPassword: '',\r\n\t\t\tcounting: false,\r\n\t\t\tcountdown: 60\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 获取验证码\r\n\t\t */\r\n\t\tasync getVerifyCode() {\r\n\t\t\tif (this.counting) return\r\n\t\t\t\r\n\t\t\tif (!this.phone) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.phone)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入正确的手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'sendVerifyCode',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tphone: this.phone\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.result.code === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '验证码已发送'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.startCountdown()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.result.message || '发送失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '发送失败，请稍后重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 开始倒计时\r\n\t\t */\r\n\t\tstartCountdown() {\r\n\t\t\tthis.counting = true\r\n\t\t\tthis.countdown = 60\r\n\t\t\tconst timer = setInterval(() => {\r\n\t\t\t\tif (this.countdown > 0) {\r\n\t\t\t\t\tthis.countdown--\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.counting = false\r\n\t\t\t\t\tclearInterval(timer)\r\n\t\t\t\t}\r\n\t\t\t}, 1000)\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 处理注册请求\r\n\t\t */\r\n\t\tasync handleRegister() {\r\n\t\t\tif (!this.phone || !this.verifyCode || !this.password || !this.confirmPassword) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请填写完整信息',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.phone)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入正确的手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.password !== this.confirmPassword) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '两次输入的密码不一致',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'register',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\t\t\tverifyCode: this.verifyCode,\r\n\t\t\t\t\t\t\tpassword: this.password\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.result.code === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '注册成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t}, 1500)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.result.message || '注册失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '注册失败，请稍后重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 返回登录页面\r\n\t\t */\r\n\t\tgoToLogin() {\r\n\t\t\tuni.navigateBack()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.register-container {\r\n\tmin-height: 100vh;\r\n\tpadding: 60rpx;\r\n\tbackground-color: #f5f5f5;\r\n\t\r\n\t.register-form {\r\n\t\tpadding: 40rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t\t\r\n\t\t.form-title {\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 60rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.input-group {\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\t\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 88rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\tborder: 2rpx solid #dcdcdc;\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.verify-code {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t\r\n\t\t\t\tinput {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbutton {\r\n\t\t\t\t\twidth: 200rpx;\r\n\t\t\t\t\theight: 88rpx;\r\n\t\t\t\t\tline-height: 88rpx;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tpadding: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.btn-group {\r\n\t\t\tbutton {\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/liululuprogram/first/GuizhouScenicTourismIntroductionSystem/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}