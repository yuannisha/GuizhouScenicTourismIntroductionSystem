{"version":3,"file":"login.js","sources":["pages/login/login.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"login-container\">\r\n\t\t<view class=\"login-form\">\r\n\t\t\t<view class=\"logo\">\r\n\t\t\t\t<image src=\"/static/logo.png\" mode=\"aspectFit\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input-group\">\r\n\t\t\t\t<input type=\"text\" v-model=\"phone\" placeholder=\"请输入手机号\" maxlength=\"11\" />\r\n                <view class=\"verify-code\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"verifyCode\" placeholder=\"请输入验证码\" maxlength=\"6\" />\r\n\t\t\t\t\t<button :disabled=\"counting\" @click=\"getVerifyCode\">\r\n\t\t\t\t\t\t{{counting ? `${countdown}s后重试` : '获取验证码'}}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<input type=\"password\" v-model=\"password\" placeholder=\"请输入密码\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btn-group\">\r\n\t\t\t\t<button type=\"primary\" @click=\"handleLogin\">登录</button>\r\n\t\t\t\t<button type=\"default\" @click=\"goToRegister\">注册账号</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * 登录页面\r\n * @description 用户登录界面，支持手机号密码登录\r\n */\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tphone: '',\r\n            verifyCode:'',\r\n\t\t\tpassword: '',\r\n            counting: false,\r\n\t\t\tcountdown: 60\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\r\n        /**\r\n\t\t * 获取验证码\r\n\t\t */\r\n\t\tasync getVerifyCode() {\r\n\t\t\tif (this.counting) return\r\n\t\t\t\r\n\t\t\tif (!this.phone) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.phone)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入正确的手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'sendVerifyCode',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tphone: this.phone\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.result.code === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '验证码已发送'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.startCountdown()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.result.message || '发送失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '发送失败，请稍后重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t},\r\n\r\n        /**\r\n\t\t * 开始倒计时\r\n\t\t */\r\n\t\tstartCountdown() {\r\n\t\t\tthis.counting = true\r\n\t\t\tthis.countdown = 60\r\n\t\t\tconst timer = setInterval(() => {\r\n\t\t\t\tif (this.countdown > 0) {\r\n\t\t\t\t\tthis.countdown--\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.counting = false\r\n\t\t\t\t\tclearInterval(timer)\r\n\t\t\t\t}\r\n\t\t\t}, 1000)\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 处理登录请求\r\n\t\t */\r\n\t\tasync handleLogin() {\r\n\t\t\tif (!this.phone || !this.password || !this.verifyCode) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入手机号和密码',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 验证手机号格式\r\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.phone)) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入正确的手机号',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'login',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tphone: this.phone,\r\n                            verifyCode:this.verifyCode,\r\n\t\t\t\t\t\t\tpassword: this.password\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (res.result.code === 0) {\r\n\t\t\t\t\t// 存储用户信息\r\n\t\t\t\t\tuni.setStorageSync('userInfo', res.result.data)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '登录成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 跳转到首页\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1500)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.result.message || '登录失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '登录失败，请稍后重试',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tconsole.error(e)\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 跳转到注册页面\r\n\t\t */\r\n\t\tgoToRegister() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/register/register'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.login-container {\r\n\tmin-height: 100vh;\r\n\tpadding: 60rpx;\r\n\tbackground-color: #f5f5f5;\r\n\t\r\n\t.login-form {\r\n\t\tpadding: 40rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t\t\r\n\t\t.logo {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-bottom: 60rpx;\r\n\t\t\t\r\n\t\t\timage {\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t\theight: 200rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.input-group {\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\t\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 88rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\tborder: 2rpx solid #dcdcdc;\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n            .verify-code {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t\r\n\t\t\t\tinput {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbutton {\r\n\t\t\t\t\twidth: 200rpx;\r\n\t\t\t\t\theight: 88rpx;\r\n\t\t\t\t\tline-height: 88rpx;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tpadding: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.btn-group {\r\n\t\t\tbutton {\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/liululuprogram/first/GuizhouScenicTourismIntroductionSystem/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":";;;AA6BA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACE,YAAW;AAAA,MACpB,UAAU;AAAA,MACD,UAAU;AAAA,MACnB,WAAW;AAAA,IACZ;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAKR,MAAM,gBAAgB;AACrB,UAAI,KAAK;AAAU;AAEnB,UAAI,CAAC,KAAK,OAAO;AAChBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,UAAI,CAAC,gBAAgB,KAAK,KAAK,KAAK,GAAG;AACtCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,UAAI;AACH,cAAM,MAAM,MAAMC,cAAQ,GAAC,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,QAAQ;AAAA,YACR,QAAQ;AAAA,cACP,OAAO,KAAK;AAAA,YACb;AAAA,UACD;AAAA,SACA;AAED,YAAI,IAAI,OAAO,SAAS,GAAG;AAC1BD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,WACP;AACD,eAAK,eAAe;AAAA,eACd;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,OAAO,WAAW;AAAA,YAC7B,MAAM;AAAA,WACN;AAAA,QACF;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACDA,sBAAAA,MAAc,MAAA,SAAA,+BAAA,CAAC;AAAA,MAChB;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,iBAAiB;AAChB,WAAK,WAAW;AAChB,WAAK,YAAY;AACjB,YAAM,QAAQ,YAAY,MAAM;AAC/B,YAAI,KAAK,YAAY,GAAG;AACvB,eAAK;AAAA,eACC;AACN,eAAK,WAAW;AAChB,wBAAc,KAAK;AAAA,QACpB;AAAA,MACA,GAAE,GAAI;AAAA,IACP;AAAA;AAAA;AAAA;AAAA,IAKD,MAAM,cAAc;AACnB,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,YAAY,CAAC,KAAK,YAAY;AACtDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAGA,UAAI,CAAC,gBAAgB,KAAK,KAAK,KAAK,GAAG;AACtCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,UAAI;AACH,cAAM,MAAM,MAAMC,cAAQ,GAAC,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,QAAQ;AAAA,YACR,QAAQ;AAAA,cACP,OAAO,KAAK;AAAA,cACS,YAAW,KAAK;AAAA,cACrC,UAAU,KAAK;AAAA,YAChB;AAAA,UACD;AAAA,SACA;AAED,YAAI,IAAI,OAAO,SAAS,GAAG;AAE1BD,wBAAAA,MAAI,eAAe,YAAY,IAAI,OAAO,IAAI;AAC9CA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,WACP;AAED,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,UAAU;AAAA,cACb,KAAK;AAAA,aACL;AAAA,UACD,GAAE,IAAI;AAAA,eACD;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,OAAO,WAAW;AAAA,YAC7B,MAAM;AAAA,WACN;AAAA,QACF;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACDA,sBAAAA,MAAc,MAAA,SAAA,gCAAA,CAAC;AAAA,MAChB;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;ACnLA,GAAG,WAAW,eAAe;"}